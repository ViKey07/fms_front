{"ast":null,"code":"import API from \"../../API\";\nimport { addCartAction, fetchCartItemsAction, increaseCartAction, decreaseCartAction } from \"./actions\";\nimport { push } from \"connected-react-router\";\nconst api = new API();\nconst CARTS_KEY = \"CARTS_KEY\";\nexport const fetchCarts = () => {\n  return async dispatch => {\n    return api.getCarts().then(carts => {\n      const subtotal = calculateSubtotal(carts);\n      dispatch(fetchCartItemsAction(carts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API: /carts/\");\n    });\n  };\n};\nexport const addCart = item => {\n  return async (dispatch, getState) => {\n    return api.addCarts(item.id).then(addedCart => {\n      let prevCarts = getState().carts.list;\n      addedCart[\"item\"] = item;\n      prevCarts.push(addedCart);\n      const subtotal = calculateSubtotal(prevCarts);\n      dispatch(addCartAction(prevCarts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API to add cart\");\n      console.log(error);\n    });\n  };\n};\nexport const increaseCart = cart_id => {\n  return async (dispatch, getState) => {\n    let prevCarts = getState().carts.list;\n    let matchedCarts = prevCarts.filter(cart => cart.id === cart_id);\n    let nextSelectedCount = matchedCarts[0].quantity + 1;\n    return api.updateCarts(cart_id, nextSelectedCount).then(updatedCart => {\n      prevCarts = prevCarts.filter(cart => cart.id !== cart_id);\n      prevCarts.push(updatedCart);\n      const subtotal = calculateSubtotal(prevCarts);\n      dispatch(increaseCartAction(prevCarts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API to increase cart's quantity\");\n      console.log(error);\n    });\n  };\n};\nexport const decreaseCart = cart_id => {\n  return async (dispatch, getState) => {\n    let prevCarts = getState().carts.list;\n    let matchedCarts = prevCarts.filter(cart => cart.id === cart_id);\n    let nextSelectedCount = matchedCarts[0].quantity - 1;\n    if (nextSelectedCount > 0) {\n      // if quantity is more than 0, update\n      return api.updateCarts(cart_id, nextSelectedCount).then(updatedCart => {\n        prevCarts = prevCarts.filter(cart => cart.id !== cart_id);\n        prevCarts.push(updatedCart);\n        const subtotal = calculateSubtotal(prevCarts);\n        dispatch(decreaseCartAction(prevCarts, subtotal));\n      }).catch(error => {\n        alert(\"Failed to connect API to decrease cart's quantity\");\n        console.log(error);\n      });\n    } else {\n      // if quantity is 0, delete\n      return api.deleteCarts(cart_id).then(deletedCarts => {\n        prevCarts = prevCarts.filter(cart => cart.id !== cart_id);\n        const subtotal = calculateSubtotal(prevCarts);\n        dispatch(decreaseCartAction(prevCarts, subtotal));\n      }).catch(error => {\n        alert(\"Failed to connect API to decrease cart's quantity\");\n        console.log(error);\n      });\n    }\n  };\n};\nconst calculateSubtotal = carts => {\n  let subtotal = 0;\n  for (let key in carts) {\n    subtotal += Number(carts[key].item.price) * carts[key].quantity;\n  }\n  return subtotal;\n};","map":{"version":3,"names":["API","addCartAction","fetchCartItemsAction","increaseCartAction","decreaseCartAction","push","api","CARTS_KEY","fetchCarts","dispatch","getCarts","then","carts","subtotal","calculateSubtotal","catch","error","alert","addCart","item","getState","addCarts","id","addedCart","prevCarts","list","console","log","increaseCart","cart_id","matchedCarts","filter","cart","nextSelectedCount","quantity","updateCarts","updatedCart","decreaseCart","deleteCarts","deletedCarts","key","Number","price"],"sources":["C:/Users/vedk4/OneDrive/Desktop/frontend_ref/Cool-Tees/src/reducks/carts/operations.js"],"sourcesContent":["import API from \"../../API\";\r\nimport {\r\n  addCartAction,\r\n  fetchCartItemsAction,\r\n  increaseCartAction,\r\n  decreaseCartAction,\r\n} from \"./actions\";\r\nimport { push } from \"connected-react-router\";\r\n\r\nconst api = new API();\r\nconst CARTS_KEY = \"CARTS_KEY\";\r\n\r\nexport const fetchCarts = () => {\r\n  return async (dispatch) => {\r\n    return api\r\n      .getCarts()\r\n      .then((carts) => {\r\n        const subtotal = calculateSubtotal(carts);\r\n        dispatch(fetchCartItemsAction(carts, subtotal));\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Failed to connect API: /carts/\");\r\n      });\r\n  };\r\n};\r\n\r\nexport const addCart = (item) => {\r\n  return async (dispatch, getState) => {\r\n    return api\r\n      .addCarts(item.id)\r\n      .then((addedCart) => {\r\n        let prevCarts = getState().carts.list;\r\n        addedCart[\"item\"] = item;\r\n        prevCarts.push(addedCart);\r\n        const subtotal = calculateSubtotal(prevCarts);\r\n        dispatch(addCartAction(prevCarts, subtotal));\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Failed to connect API to add cart\");\r\n        console.log(error);\r\n      });\r\n  };\r\n};\r\n\r\nexport const increaseCart = (cart_id) => {\r\n  return async (dispatch, getState) => {\r\n    let prevCarts = getState().carts.list;\r\n    let matchedCarts = prevCarts.filter((cart) => cart.id === cart_id);\r\n    let nextSelectedCount = matchedCarts[0].quantity + 1;\r\n    return api\r\n      .updateCarts(cart_id, nextSelectedCount)\r\n      .then((updatedCart) => {\r\n        prevCarts = prevCarts.filter((cart) => cart.id !== cart_id);\r\n        prevCarts.push(updatedCart);\r\n        const subtotal = calculateSubtotal(prevCarts);\r\n        dispatch(increaseCartAction(prevCarts, subtotal));\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Failed to connect API to increase cart's quantity\");\r\n        console.log(error);\r\n      });\r\n  };\r\n};\r\n\r\nexport const decreaseCart = (cart_id) => {\r\n  return async (dispatch, getState) => {\r\n    let prevCarts = getState().carts.list;\r\n    let matchedCarts = prevCarts.filter((cart) => cart.id === cart_id);\r\n    let nextSelectedCount = matchedCarts[0].quantity - 1;\r\n    if (nextSelectedCount > 0) {\r\n      // if quantity is more than 0, update\r\n      return api\r\n        .updateCarts(cart_id, nextSelectedCount)\r\n        .then((updatedCart) => {\r\n          prevCarts = prevCarts.filter((cart) => cart.id !== cart_id);\r\n          prevCarts.push(updatedCart);\r\n          const subtotal = calculateSubtotal(prevCarts);\r\n          dispatch(decreaseCartAction(prevCarts, subtotal));\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Failed to connect API to decrease cart's quantity\");\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      // if quantity is 0, delete\r\n      return api\r\n        .deleteCarts(cart_id)\r\n        .then((deletedCarts) => {\r\n          prevCarts = prevCarts.filter((cart) => cart.id !== cart_id);\r\n          const subtotal = calculateSubtotal(prevCarts);\r\n          dispatch(decreaseCartAction(prevCarts, subtotal));\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Failed to connect API to decrease cart's quantity\");\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n};\r\n\r\nconst calculateSubtotal = (carts) => {\r\n  let subtotal = 0;\r\n  for (let key in carts) {\r\n    subtotal += Number(carts[key].item.price) * carts[key].quantity;\r\n  }\r\n  return subtotal;\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,WAAW;AAC3B,SACEC,aAAa,EACbC,oBAAoB,EACpBC,kBAAkB,EAClBC,kBAAkB,QACb,WAAW;AAClB,SAASC,IAAI,QAAQ,wBAAwB;AAE7C,MAAMC,GAAG,GAAG,IAAIN,GAAG,EAAE;AACrB,MAAMO,SAAS,GAAG,WAAW;AAE7B,OAAO,MAAMC,UAAU,GAAG,MAAM;EAC9B,OAAO,MAAOC,QAAQ,IAAK;IACzB,OAAOH,GAAG,CACPI,QAAQ,EAAE,CACVC,IAAI,CAAEC,KAAK,IAAK;MACf,MAAMC,QAAQ,GAAGC,iBAAiB,CAACF,KAAK,CAAC;MACzCH,QAAQ,CAACP,oBAAoB,CAACU,KAAK,EAAEC,QAAQ,CAAC,CAAC;IACjD,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;MAChBC,KAAK,CAAC,gCAAgC,CAAC;IACzC,CAAC,CAAC;EACN,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,OAAO,GAAIC,IAAI,IAAK;EAC/B,OAAO,OAAOV,QAAQ,EAAEW,QAAQ,KAAK;IACnC,OAAOd,GAAG,CACPe,QAAQ,CAACF,IAAI,CAACG,EAAE,CAAC,CACjBX,IAAI,CAAEY,SAAS,IAAK;MACnB,IAAIC,SAAS,GAAGJ,QAAQ,EAAE,CAACR,KAAK,CAACa,IAAI;MACrCF,SAAS,CAAC,MAAM,CAAC,GAAGJ,IAAI;MACxBK,SAAS,CAACnB,IAAI,CAACkB,SAAS,CAAC;MACzB,MAAMV,QAAQ,GAAGC,iBAAiB,CAACU,SAAS,CAAC;MAC7Cf,QAAQ,CAACR,aAAa,CAACuB,SAAS,EAAEX,QAAQ,CAAC,CAAC;IAC9C,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;MAChBC,KAAK,CAAC,mCAAmC,CAAC;MAC1CS,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;AACH,CAAC;AAED,OAAO,MAAMY,YAAY,GAAIC,OAAO,IAAK;EACvC,OAAO,OAAOpB,QAAQ,EAAEW,QAAQ,KAAK;IACnC,IAAII,SAAS,GAAGJ,QAAQ,EAAE,CAACR,KAAK,CAACa,IAAI;IACrC,IAAIK,YAAY,GAAGN,SAAS,CAACO,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,EAAE,KAAKO,OAAO,CAAC;IAClE,IAAII,iBAAiB,GAAGH,YAAY,CAAC,CAAC,CAAC,CAACI,QAAQ,GAAG,CAAC;IACpD,OAAO5B,GAAG,CACP6B,WAAW,CAACN,OAAO,EAAEI,iBAAiB,CAAC,CACvCtB,IAAI,CAAEyB,WAAW,IAAK;MACrBZ,SAAS,GAAGA,SAAS,CAACO,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,EAAE,KAAKO,OAAO,CAAC;MAC3DL,SAAS,CAACnB,IAAI,CAAC+B,WAAW,CAAC;MAC3B,MAAMvB,QAAQ,GAAGC,iBAAiB,CAACU,SAAS,CAAC;MAC7Cf,QAAQ,CAACN,kBAAkB,CAACqB,SAAS,EAAEX,QAAQ,CAAC,CAAC;IACnD,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;MAChBC,KAAK,CAAC,mDAAmD,CAAC;MAC1DS,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;AACH,CAAC;AAED,OAAO,MAAMqB,YAAY,GAAIR,OAAO,IAAK;EACvC,OAAO,OAAOpB,QAAQ,EAAEW,QAAQ,KAAK;IACnC,IAAII,SAAS,GAAGJ,QAAQ,EAAE,CAACR,KAAK,CAACa,IAAI;IACrC,IAAIK,YAAY,GAAGN,SAAS,CAACO,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,EAAE,KAAKO,OAAO,CAAC;IAClE,IAAII,iBAAiB,GAAGH,YAAY,CAAC,CAAC,CAAC,CAACI,QAAQ,GAAG,CAAC;IACpD,IAAID,iBAAiB,GAAG,CAAC,EAAE;MACzB;MACA,OAAO3B,GAAG,CACP6B,WAAW,CAACN,OAAO,EAAEI,iBAAiB,CAAC,CACvCtB,IAAI,CAAEyB,WAAW,IAAK;QACrBZ,SAAS,GAAGA,SAAS,CAACO,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,EAAE,KAAKO,OAAO,CAAC;QAC3DL,SAAS,CAACnB,IAAI,CAAC+B,WAAW,CAAC;QAC3B,MAAMvB,QAAQ,GAAGC,iBAAiB,CAACU,SAAS,CAAC;QAC7Cf,QAAQ,CAACL,kBAAkB,CAACoB,SAAS,EAAEX,QAAQ,CAAC,CAAC;MACnD,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;QAChBC,KAAK,CAAC,mDAAmD,CAAC;QAC1DS,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;MACpB,CAAC,CAAC;IACN,CAAC,MAAM;MACL;MACA,OAAOV,GAAG,CACPgC,WAAW,CAACT,OAAO,CAAC,CACpBlB,IAAI,CAAE4B,YAAY,IAAK;QACtBf,SAAS,GAAGA,SAAS,CAACO,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,EAAE,KAAKO,OAAO,CAAC;QAC3D,MAAMhB,QAAQ,GAAGC,iBAAiB,CAACU,SAAS,CAAC;QAC7Cf,QAAQ,CAACL,kBAAkB,CAACoB,SAAS,EAAEX,QAAQ,CAAC,CAAC;MACnD,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;QAChBC,KAAK,CAAC,mDAAmD,CAAC;QAC1DS,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC;AACH,CAAC;AAED,MAAMF,iBAAiB,GAAIF,KAAK,IAAK;EACnC,IAAIC,QAAQ,GAAG,CAAC;EAChB,KAAK,IAAI2B,GAAG,IAAI5B,KAAK,EAAE;IACrBC,QAAQ,IAAI4B,MAAM,CAAC7B,KAAK,CAAC4B,GAAG,CAAC,CAACrB,IAAI,CAACuB,KAAK,CAAC,GAAG9B,KAAK,CAAC4B,GAAG,CAAC,CAACN,QAAQ;EACjE;EACA,OAAOrB,QAAQ;AACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}